\chapter{Johdanto\label{intro}}

Satunnaisuutta on jo pitkään hyödynnetty osana hajautettujen järjestelmien toimintaa parantamaan järjestelmien luotettavuutta sekä turvallisuutta. M. Rabin esitti vuonna 1983 kuinka satunnaisuutta voidaan hyödyntää varmennettujen sähköpostien lähettämisen sekä sopimusten allekirjoittamisen mahdollistavissa protokollissa \cite{rabin_transaction_1983}. Nykypäivänä luotettavalle satunnaisuuden tuottamiselle on tarvetta esimerkiksi julkisen salauksen avaimien generoimisessa \cite{corrigan-gibbs_ensuring_2014}, joka on operaatio, jonka oikeelliseen toimintaan nojaavat internetin käytetyimmät salatun viestinnän protokollat, kuten esimerkiksi TLS \cite{rescorla_transport_2018}. 

%Viime vuosina yleistyneet l
Lohkoketjuteknologiat ovat esimerkki hajautetuista järjestelmistä joissa tarvitaan myös satunnaisuutta. Lohkoketjuprotokollat, kuten myös jotkin lohkoketjusovellukset vaativat satunnaisuutta toimiakseen. Lohkoketjuprotokollan tasolla satunnaisuutta hyödynnetään esimerkiksi tietyissä konsensusalgoritmeissa \cite{gilad_algorand_2017, hanke_dfinity_2018}, joiden avulla lohkoketjun osallistujat saavuttavat yhteisymmärryksen lohkoketjun nykyisestä tilasta. 

%Satunnaisuutta hyödyntävät lohkoketjut kuluttavat perinteisiä lohkoketjuja, kuten Bitcoin \cite{noauthor_bitcoin_nodate} ja Ethereum \cite{noauthor_ethereum_nodate}, vähemmän energiaa konsensuksen saavuttamiseen. Satunnaisuutta käyttävät lohkoketjut pystyvät käsittelemään myös selvästi perinteisiä lohkoketjuja suuremman määrän transaktioita sekunnissa.

Lohkoketjuympäristössä suoritetaan lohkoketjusovelluksia. Lohkoketju on järjestelmänä lupavapaa tarkoittaen, että kuka tahansa voi liittyä järjestelmään ja vuorovaikuttaa sen kanssa. Lohkoketjuteknologia mahdollistaa sellaisten sovellusten toteuttamisen, joissa käyttäjien ei tarvitse luottaa toisiinsa eikä mihinkään kolmanteen osapuoleen. Esimerkiksi Bitcoinin käyttäjä voi siirtää kenelle tahansa, minne päin maailmaa tahansa taloudellista arvoa Bitcoin-kryptovaluutan muodossa.

Lohkoketjun deterministisyys luo kuitenkin haasteen lohkoketjusovelluksille, jotka vaativat oikein toimiakseen satunnaisuutta. Tälläisia sovelluksia ovat esimerkiksi hajautetut lotto-arvonnat \cite{pooltogether_pooltogether_nodate}, jotka tarvitsevat satunnaislukuja arvonnan suorittamiseen, sekä hajautetut tuomioistuimet \cite{lesaege_kleros_2020}, jotka tarvitsevat satunnaisuutta tuomareiden valitsemiseen. 

Lupavapaus luo järjestelmään uhan haitallisista toimijoista, mikä vaikeuttaa satunnaisuutta generoivien protokollien suunnittelua, sillä haitallisilla toimijoilla on intressi ennustaa tai manipuloida käytettyä satunnaisuutta. Lohkoketjuteknologia mahdollistaa taloudellisen arvon vaivattoman siirtämisen järjestelmän käyttäjien välillä ja haitallisia toimijoita voi lohkoketjusovelluksissa motivoida satunnaisuuden ennustamiseen tai manipulointiin kymmenien, jopa satojen, miljoonien arvoiset palkkiot. Toisaalta arvon siirtämisen mahdollisuuden myötä lohkoketjuympäristössä satunnaisuuden generoimisen protokolliin voidaan lisätä taloudellisia ja peliteoreettisia kannustimia haitallisten toimijoiden torjumiseksi.

Tässä tutkielmassa kokoan yhteen olemassaolevia protokollia, jotka tarjoavat ratkaisun kysymykseen: Kuinka lohkoketjusovellus voi generoida satunnaisuutta? Luvussa kaksi määrittelen tarvittavat käsitteet. Luku kolme esittelee kootut protokollat sekä analysoi miten protokollat täyttävät vaatimukset satunnaisuudesta, ennustamattomuudesta, todennettavuudesta sekä manipuloimattomuudesta. Luvussa analysoidaan myös protokollien kommunikointivaatimuksia ja esitetään hyökkäyksiä, joita protokollia vastaan voidaan kohdistaa. Luvussa neljä vertaillaan eri protokollia ja tarkastellaan protokollien sopivuutta lohkoketjusovelluksiin. Luku viisi toimii yhteenvetona.

Vaikka suurin osa protokollista on suunniteltu nimenomaan lohkoketjuympäristöön, niin esittelen tutkielmassa myös protokollia jotka eivät vaadi toimiakseen lohkoketjuympäristöä, mutta ne voidaan toteuttaa, tai niiden käyttämiä metodeja voidaan käyttää, myös lohkoketjuympäristössä. Protokollat pyrkivät vastaamaan myös yleisempään kysymykseen: Kuinka käyttäjät, jotka eivät luota toisiinsa, voivat generoida satunnaisuutta? 

% Esittele tutkimusalueet: Asynkronisten konsensusalgoritmien satunnaisuus iso aihe, lohkoketjuratkaisut pienempi aihe.