\chapter{Johdanto\label{intro}}

Lohkoketjusovelluksilla on kymmeniä tuhansia päivittäisiä käyttäjiä \cite{noauthor_state_nodate}. Sovellukset pyrkivät tarjoamaan erilaisia ratkaisuja aina terveystietojen hallinnasta\footnote{https://medibloc.com/en/} hajautettuihin rahoitusmarkkinoihin\footnote{https://ethereum.org/en/defi/}. Lohkoketjusovelluksen ydinlogiikan suoritus tapahtuu lohkoketjussa. Lohkoketju on järjestelmänä lupavapaa tarkoittaen, että kuka tahansa voi liittyä järjestelmään ja vuorovaikuttaa sen kanssa. Lohkoketjuteknologia mahdollistaa sellaisten sovellusten toteuttamisen, joissa käyttäjien ei tarvitse luottaa toisiinsa eikä mihinkään kolmanteen osapuoleen.

Lohkoketjun deterministisyys ja lupavapaus luo kuitenkin haasteen lohkoketjusovelluksille, jotka vaativat oikein toimiakseen satunnaisuutta. Tälläisia sovelluksia ovat esimerkiksi hajautetut lotto-arvonnat\footnote{https://pooltogether.com}, jotka tarvitsevat satunnaislukuja arvonnan suorittamiseen, sekä hajautetut tuomioistuimet\footnote{https://kleros.io/}, jotka tarvitsevat satunnaisuutta tuomareiden valitsemiseen. 

Lupavapauden myötä lohkoketjusovelluksia uhkaa haitalliset toimijat, mikä vaikeuttaa satunnaisuuden tuottamista lohkoketjusovellusta varten, sillä haitallisilla toimijoilla on intressi ennustaa tai manipuloida lohkoketjusovelluksessa käytettyä satunnaisuutta. Lohkoketjuteknologia mahdollistaa taloudellisen arvon vaivattoman siirtämisen järjestelmän käyttäjien välillä ja haitallisia toimijoita voi lohkoketjusovelluksissa motivoida satunnaisuuden ennustamiseen tai manipulointiin kymmenien, jopa satojen, miljoonien arvoiset palkkiot. Toisaalta arvon siirtämisen mahdollisuuden myötä lohkoketjuympäristössä satunnaisuutta tuottaviin menetelmiin voidaan lisätä taloudellisia ja peliteoreettisia kannustimia haitallisten toimijoiden torjumiseksi.

% Kuinka tuottaa tai käyttää?
Tässä tutkielmassa kokoan yhteen olemassaolevia menetelmiä, jotka tarjoavat ratkaisun kysymykseen: Kuinka lohkoketjusovellus saa hyödynnettäväkseen satunnaisuutta? Luvussa \ref{methods} määrittelen tarvittavat käsitteet ja vaatimukset satunnaisuudelle. Luku \ref{results} esittelee menetelmiä, joilla lohkoketjusovellukseen saadaan satunnaisuutta sekä analysoi miten hyvin nämä menetelmät täyttävät satunnaisuudelle asetetut vaatimukset. Tutkielman pääpaino on protokollissa, joiden avulla sovelluksen käyttäjät tuottavat itse sovelluksen vaatiman satunnaisuuden. Luvussa käydään läpi eri menetelmien oletuksia, kommunikointikustannuksia, esitetään hyökkäyksiä, joita menetelmiä vastaan voidaan kohdistaa sekä esitetään huomioita menetelmien toteuttamisesta lohkoketjusovelluksessa. Luvussa \ref{discussion} vertaillaan eri menetelmiä ja tarkastellaan niiden sopivuutta lohkoketjusovelluksiin. Luku \ref{conclusions} toimii yhteenvetona.

Satunnaisuuden tuottamista hajautetussa ympäristössä, jossa käyttäjät eivät luota toisiinta on tutkittu jo 1980-luvulla \cite{10.1145/1008908.1008911}. Vaikka suurin osa tutkielmassa esiteltävistä menetelmistä on suunniteltu nimenomaan lohkoketjuympäristöön, niin esittelen tutkielmassa myös satunnaisuuden tuottamisen protokollia jotka eivät vaadi toimiakseen lohkoketjua, mutta ne voidaan toteuttaa myös lohkoketjujen kontekstissa. Lohkoketjun tasolla hajautettua satunnaisuutta tuottavia protokollia hyödynnetään esimerkiksi tietyissä konsensusalgoritmeissa \cite{gilad_algorand_2017, hanke_dfinity_2018}, joiden avulla lohkoketjun osallistujat saavuttavat yhteisymmärryksen lohkoketjun nykyisestä tilasta.  Protokollat pyrkivät vastaamaan myös yleisempään kysymykseen: Kuinka käyttäjät, jotka eivät luota toisiinsa, voivat tuottaa satunnaisuutta? 